<html>
<head>
  <meta charset="utf-8">
  <script src="../lib/vue.js"></script>
  <script src="../lib/jquery-3.4.1.min.js"></script>
  <script src="../common/const.js"></script>
  <link rel="stylesheet" type="text/css" href="index.css">
</head>
<body>
<div id="contentArea">
  <div id="openFilterButton" class="filter-switch">&lt;&lt;フィルタ</div>
  <div id="filterContainer" class="filter">
    <div>
      <span class="element"><input type="checkbox" id="filterCondition_playMode_0" name="playMode" value="0" /><label for="filterCondition_playMode_0">SP</label></span>
      <span class="element"><input type="checkbox" id="filterCondition_playMode_1" name="playMode" value="1" /><label for="filterCondition_playMode_1">DP</label></span>
    </div>
    <div>
      <span class="element"><input type="checkbox" id="filterCondition_level_1" name="level" value="1" /><label for="filterCondition_level_1">Level 1</label></span>
      <span class="element"><input type="checkbox" id="filterCondition_level_2" name="level" value="2" /><label for="filterCondition_level_2">Level 2</label></span>
      <span class="element"><input type="checkbox" id="filterCondition_level_3" name="level" value="3" /><label for="filterCondition_level_3">Level 3</label></span>
      <span class="element"><input type="checkbox" id="filterCondition_level_4" name="level" value="4" /><label for="filterCondition_level_4">Level 4</label></span>
      <span class="element"><input type="checkbox" id="filterCondition_level_5" name="level" value="5" /><label for="filterCondition_level_5">Level 5</label></span>
      <span class="element"><input type="checkbox" id="filterCondition_level_6" name="level" value="6" /><label for="filterCondition_level_6">Level 6</label></span>
      <span class="element"><input type="checkbox" id="filterCondition_level_7" name="level" value="7" /><label for="filterCondition_level_7">Level 7</label></span>
      <span class="element"><input type="checkbox" id="filterCondition_level_8" name="level" value="8" /><label for="filterCondition_level_8">Level 8</label></span>
      <span class="element"><input type="checkbox" id="filterCondition_level_9" name="level" value="9" /><label for="filterCondition_level_9">Level 9</label></span>
      <span class="element"><input type="checkbox" id="filterCondition_level_10" name="level" value="10" /><label for="filterCondition_level_10">Level 10</label></span>
      <span class="element"><input type="checkbox" id="filterCondition_level_11" name="level" value="11" /><label for="filterCondition_level_11">Level 11</label></span>
      <span class="element"><input type="checkbox" id="filterCondition_level_12" name="level" value="12" /><label for="filterCondition_level_12">Level 12</label></span>
      <span class="element"><input type="checkbox" id="filterCondition_level_13" name="level" value="13" /><label for="filterCondition_level_13">Level 13</label></span>
      <span class="element"><input type="checkbox" id="filterCondition_level_14" name="level" value="14" /><label for="filterCondition_level_14">Level 14</label></span>
      <span class="element"><input type="checkbox" id="filterCondition_level_15" name="level" value="15" /><label for="filterCondition_level_15">Level 15</label></span>
      <span class="element"><input type="checkbox" id="filterCondition_level_16" name="level" value="16" /><label for="filterCondition_level_16">Level 16</label></span>
      <span class="element"><input type="checkbox" id="filterCondition_level_17" name="level" value="17" /><label for="filterCondition_level_17">Level 17</label></span>
      <span class="element"><input type="checkbox" id="filterCondition_level_18" name="level" value="18" /><label for="filterCondition_level_18">Level 18</label></span>
      <span class="element"><input type="checkbox" id="filterCondition_level_19" name="level" value="19" /><label for="filterCondition_level_19">Level 19</label></span>
    </div>
    <div>
      <button id="closeFilterButton" type="button" name="refreshList2">　更　新　</button>
    </div>
  </div>
  <div id="filterBackground" class="filter-background">
  </div>

  <div id="app-charts" class="content">
    <template v-if="statistics.fullComboType.marvelous_fc > 0">MFC:{{ statistics.fullComboType.marvelous_fc }}</template>
    <template v-if="statistics.fullComboType.perfect_fc > 0">PFC:{{ statistics.fullComboType.perfect_fc }}</template>
    <template v-if="statistics.fullComboType.great_fc > 0">FC:{{ statistics.fullComboType.great_fc }}</template>
    <template v-if="statistics.fullComboType.good_fc > 0">GFC:{{ statistics.fullComboType.good_fc }}</template>
    <template v-if="statistics.fullComboType.clear > 0">Clear:{{ statistics.fullComboType.clear }}</template>
    <template v-if="statistics.fullComboType.failed > 0">Failed:{{ statistics.fullComboType.failed }}</template>
    <template v-if="statistics.fullComboType.no_play > 0">NoPlay:{{ statistics.fullComboType.no_play }}</template>
    <template v-if="statistics.musicCount > 0">
    <div class="graph">
      <div class="inner"><span class="element marvelous_fc" v-bind:style="{ width: 'calc(' + statistics.fullComboType.marvelous_fc + ' / ' + statistics.musicCount + ' * 100%'}"></span><span class="element perfect_fc" v-bind:style="{ width: 'calc(' + statistics.fullComboType.perfect_fc + ' / ' + statistics.musicCount + ' * 100%'}"></span><span class="element great_fc" v-bind:style="{ width: 'calc(' + statistics.fullComboType.great_fc + ' / ' + statistics.musicCount + ' * 100%'}"></span><span class="element good_fc" v-bind:style="{ width: 'calc(' + statistics.fullComboType.good_fc + ' / ' + statistics.musicCount + ' * 100%'}"></span><span class="element clear" v-bind:style="{ width: 'calc(' + statistics.fullComboType.clear + ' / ' + statistics.musicCount + ' * 100%'}"></span><span class="element failed" v-bind:style="{ width: 'calc(' + statistics.fullComboType.failed + ' / ' + statistics.musicCount + ' * 100%'}"></span><span class="element no_play" v-bind:style="{ width: 'calc(' + statistics.fullComboType.no_play + ' / ' + statistics.musicCount + ' * 100%'}"></span></div>
    </div>
    </template>
    <table>
      <template v-for="chart in charts">
        <tr>
          <td class="level" v-bind:class="{ beginner: chart.difficulty == 0, basic: chart.difficulty == 1, difficult: chart.difficulty == 2, expert: chart.difficulty == 3, challenge: chart.difficulty == 4 }">
            {{ chart.level }}<template v-if="chart.playMode == 0">&#39;</template><template v-if="chart.playMode == 1">&quot;</template>
          </td>
          <td class="title">{{ chart.title }}</td>
          <template v-if="chart.scoreRank == 0">
            <td class="score_rank"></td>
          </template>
          <template v-if="chart.scoreRank == 1">
            <td class="score_rank rank_e">E</td>
          </template>
          <template v-if="chart.scoreRank == 2">
            <td class="score_rank rank_d">D</td>
          </template>
          <template v-if="chart.scoreRank == 3">
            <td class="score_rank rank_d">D+</td>
          </template>
          <template v-if="chart.scoreRank == 4">
            <td class="score_rank rank_c">C-</td>
          </template>
          <template v-if="chart.scoreRank == 5">
            <td class="score_rank rank_c">C</td>
          </template>
          <template v-if="chart.scoreRank == 6">
            <td class="score_rank rank_c">C+</td>
          </template>
          <template v-if="chart.scoreRank == 7">
            <td class="score_rank rank_b">B-</td>
          </template>
          <template v-if="chart.scoreRank == 8">
            <td class="score_rank rank_b">B</td>
          </template>
          <template v-if="chart.scoreRank == 9">
            <td class="score_rank rank_b">B+</td>
          </template>
          <template v-if="chart.scoreRank == 10">
            <td class="score_rank rank_a">A-</td>
          </template>
          <template v-if="chart.scoreRank == 11">
            <td class="score_rank rank_a">A</td>
          </template>
          <template v-if="chart.scoreRank == 12">
            <td class="score_rank rank_a">A+</td>
          </template>
          <template v-if="chart.scoreRank == 13">
            <td class="score_rank rank_aa">AA-</td>
          </template>
          <template v-if="chart.scoreRank == 14">
            <td class="score_rank rank_aa">AA</td>
          </template>
          <template v-if="chart.scoreRank == 15">
            <td class="score_rank rank_aa">AA+</td>
          </template>
          <template v-if="chart.scoreRank == 16">
            <td class="score_rank rank_aaa">AAA</td>
          </template>
          <td class="full_combo_type" v-bind:class="{ good_fc: chart.fullComboType == 1, great_fc: chart.fullComboType == 2, perfect_fc: chart.fullComboType == 3, marvelous_fc: chart.fullComboType == 4 }"><template v-if="chart.fullComboType > 0">○</template></td>
          <td class="score">{{ chart.score.toLocaleString() }}</td>
        </tr>
        <tr>
          <td colspan="5" class="hr"></td>
        </tr>
      </template>
    </table>
  </div>

  <button id="dumpMusicListButton" type="button" name="dumpMusicList">楽曲リストを出力</button>
  <textarea id="textarea" style="width:100%" rows="10">
  </textarea>

  <hr>
  <button id="updateParsedMusicListButton" type="button" name="updateParsedMusicList">パース済の曲リストを取得</button>
  <button id="updateMusicListButton" type="button" name="updateMusicList">公式から曲リストを取得</button>
  <button id="updateMusicList2Button" type="button" name="updateMusicList2">スコアリストにあって曲リストにない曲の情報を公式から取得</button>
  <button id="updateSingleScoreListButton" type="button" name="updateSingleScoreList">スコアリストを公式から取得 (SP)</button>
  <button id="updateDoubleScoreListButton" type="button" name="updateDoubleScoreList">スコアリストを公式から取得 (DP)</button>
  <button id="updateScoreDetailButton" type="button" name="updateScoreDetail">スコア詳細を公式から取得</button>
  <button id="updateChartsButton" type="button" name="updateCharts">update charts</button>
  <button id="refreshListButton" type="button" name="refreshList">refresh list</button>
  <textarea id="filterConditions" style="width:100%" rows="10">
    [
      { attribute: 'playMode', values: [ PLAY_MODE.DOUBLE ] },
      { attribute: 'level', values: [ 17 ] }
    ]
  </textarea>
  <div id="app-log">
    <template v-for="line in log">
        {{ line }} <br>
    </template>
  </div>

  <a href="index.html">戻る</a>
</div>
</body>
<script src="logReceiver.js"></script>
<script src="main.js"></script>
<script src="debug.js"></script>
</html>
